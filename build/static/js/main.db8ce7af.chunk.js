(this["webpackJsonpgoit-react-hw-07-hooks-phonebook"]=this["webpackJsonpgoit-react-hw-07-hooks-phonebook"]||[]).push([[5],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,c=n(6),a=n(18),o=n(31),i=Object(a.c)({name:"contacts",initialState:{items:[],filter:"",isLoading:!1,error:null},reducers:{changeFilters:function(e,t){e.filter=t.payload}},extraReducers:(r={},Object(c.a)(r,o.fetchContacts.pending,(function(e,t){e.isLoading=!0})),Object(c.a)(r,o.fetchContacts.fulfilled,(function(e,t){e.isLoading=!1,e.items=t.payload})),Object(c.a)(r,o.fetchContacts.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload})),Object(c.a)(r,o.addContact.pending,(function(e,t){e.isLoading=!0})),Object(c.a)(r,o.addContact.fulfilled,(function(e,t){e.isLoading=!1,e.items.unshift(t.payload)})),Object(c.a)(r,o.addContact.rejected,(function(e,t){e.error=t.payload})),Object(c.a)(r,o.deleteContact.pending,(function(e,t){e.isLoading=!0})),Object(c.a)(r,o.deleteContact.fulfilled,(function(e,t){e.isLoading=!1,e.items=e.items.filter((function(e){return e.id!==t.payload}))})),Object(c.a)(r,o.deleteContact.rejected,(function(e,t){e.error=t.payload})),Object(c.a)(r,o.changeContact.pending,(function(e,t){e.isLoading=!0})),Object(c.a)(r,o.changeContact.fulfilled,(function(e,t){e.isLoading=!1,e.items=e.items.map((function(e){return e.id!==t.payload.id?e:t.payload}))})),Object(c.a)(r,o.changeContact.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload})),r)}),s=i.actions.changeFilters;t.b=i.reducer},131:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var r,c,a,o,i=n(0),s=n.n(i),u=n(33),l=n.n(u),d=(n(131),n(14)),b=n(10),j=n(26),p={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsfetchingCurrentUser:function(e){return e.auth.isFetchingCurrentUser},getUserEmail:function(e){return e.auth.user.email}},f=n(22),h=n(50),g=n(68),O=n(2),x=["children","redirectTo"],m=function(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/login":n,c=Object(g.a)(e,x),a=Object(j.c)(p.getIsLoggedIn);return Object(O.jsx)(b.b,Object(h.a)(Object(h.a)({},c),{},{children:a?t:Object(O.jsx)(b.a,{to:r})}))},v=["children","redirectTo","restricted"],C=function(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=e.restricted,a=void 0!==c&&c,o=Object(g.a)(e,v),i=Object(j.c)(p.getIsLoggedIn)&&a;return Object(O.jsx)(b.b,Object(h.a)(Object(h.a)({},o),{},{children:i?Object(O.jsx)(b.a,{to:r}):t}))},y=n(110),k=n.n(y),w=n(20),L=n(40),S=L.a.div(r||(r=Object(w.a)(["\n  position: relative;\n  width: 200px;\n  height: 300px;\n  padding: 10px;\n  background-color: #a7c6ff;\n  p {\n    text-align: center;\n    margin-bottom: 5px;\n\n    &.title {\n      font-size: 24px;\n    }\n\n    &.subtitle {\n      font-size: 21px;\n      font-weight: 700;\n      margin: 0;\n    }\n  }\n\n  img {\n    display: block;\n    width: 90px;\n    height: 90px;\n    border-radius: 30%;\n    margin: 10px auto;\n  }\n\n  button {\n    width: 150px;\n    display: block;\n    cursor: pointer;\n    color: #000;\n    font-size: 26px;\n    position: absolute;\n    bottom: 10px;\n    left: 50%;\n    transform: translate(-50%, 0%);\n    outline: none;\n    border: 1px solid #fe1a2e;\n    border-radius: 15px;\n    background-color: #ff6472;\n\n    :hover {\n      transform: translate(-50%, 0%) scale(1.1);\n    }\n  }\n"]))),E=n.p+"static/media/user_photo.f9dfbf33.gif",I=function(){var e=Object(j.b)(),t=Object(j.c)(p.getUserName),n=Object(j.c)(p.getUserEmail);return Object(O.jsxs)(S,{children:[Object(O.jsx)("p",{className:"title",children:"Your profile"}),Object(O.jsx)("img",{src:E,alt:"user_photo"}),Object(O.jsx)("p",{className:"subtitle",children:"Name"}),Object(O.jsx)("p",{children:t}),Object(O.jsx)("p",{className:"subtitle",children:"Email"}),Object(O.jsx)("p",{children:n}),Object(O.jsxs)("button",{onClick:function(){e(f.a.logOut())},style:{marginBottom:"-5px"},children:[Object(O.jsx)(k.a,{sx:{color:"#000"}}),"Log out"]})]})},F=n(202),z=n(173),T=n(172),U=n(205),W=n(114),N=n.n(W),P=n(113),V=n.n(P),A=n(104),B=n.n(A),R=n(115),D=n.n(R),H=n(116),J=n.n(H),M=n(58),Y=n(200),_=n(201),G=Object(L.a)(M.b)(c||(c=Object(w.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  text-decoration: none;\n  color: #fff;\n  font-size: 16px;\n  border-radius: 10px;\n\n  &.active {\n    background-color: rgba(255, 255, 255, 0.2);\n    transform: scale(1.1);\n    box-shadow: 0px 0px 10px 5px rgba(255, 255, 255, 0.2);\n  }\n"]))),q=Object(L.a)(Y.a)(a||(a=Object(w.a)(["\n  padding: 0 5px;\n  ul {\n    display: flex;\n    list-style: none;\n  }\n  ul:not(:last-child) {\n    flex-grow: 2;\n  }\n  li {\n    margin: 0 5px;\n  }\n"]))),K=Object(L.a)(_.a)(o||(o=Object(w.a)(["\n  display: flex;\n  padding: 20px;\n  justify-content: center;\n"]))),Q=Object(i.lazy)((function(){return n.e(1).then(n.bind(null,273))})),X=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(8),n.e(3)]).then(n.bind(null,266))})),Z=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,268))})),$=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,269))})),ee=function(){var e=Object(i.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(j.b)(),a=Object(j.c)(p.getIsLoggedIn),o=Object(j.c)(p.getIsfetchingCurrentUser);Object(i.useEffect)((function(){c(f.a.refresh())}),[c]);return!o&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F.a,{position:"static",children:Object(O.jsxs)(q,{children:[Object(O.jsx)("ul",{children:a?Object(O.jsx)("li",{children:Object(O.jsxs)(G,{exact:!0,to:"/contacts",activeClassName:"active",children:[Object(O.jsx)(V.a,{sx:{width:20,height:20}}),"Phonebook"]})}):Object(O.jsx)("li",{children:Object(O.jsxs)(G,{exact:!0,to:"/",activeClassName:"active",children:[Object(O.jsx)(N.a,{sx:{width:20,height:20}}),"Home"]})})}),a?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z.a,{children:Object(O.jsx)(J.a,{onClick:function(e){r(e.currentTarget)},sx:{width:24,height:24,cursor:"pointer",color:"#fff"}})}),Object(O.jsx)(T.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(n),onClose:function(){r(null)},children:Object(O.jsx)(I,{})})]}):Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsxs)(G,{exact:!0,to:"/register",activeClassName:"active",children:[Object(O.jsx)(D.a,{sx:{width:20,height:20}}),"Registration"]})}),Object(O.jsx)("li",{children:Object(O.jsxs)(G,{exact:!0,to:"/login",activeClassName:"active",children:[Object(O.jsx)(B.a,{sx:{width:20,height:20}}),"Login"]})})]})]})}),Object(O.jsx)(i.Suspense,{fallback:Object(O.jsx)(K,{children:Object(O.jsx)(U.a,{})}),children:Object(O.jsxs)(b.d,{children:[Object(O.jsx)(C,{exact:!0,redirectTo:"/contacts",restricted:!0,path:"/",children:Object(O.jsx)(Q,{})}),Object(O.jsx)(m,{exact:!0,redirectTo:"/login",path:"/contacts",children:Object(O.jsx)(X,{})}),Object(O.jsx)(C,{exact:!0,redirectTo:"/contacts",restricted:!0,path:"/register",children:Object(O.jsx)(Z,{})}),Object(O.jsx)(C,{exact:!0,redirectTo:"/contacts",restricted:!0,path:"/login",children:Object(O.jsx)($,{})})]})})]})},te=n(49);var ne,re=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ee,{}),Object(O.jsx)(te.a,{position:"top-center",autoClose:3e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},ce=n(21),ae=n(18),oe=n(117),ie=n.n(oe),se=n(39),ue=n(105),le=n(6),de=Object(ae.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1,error:null},extraReducers:(ne={},Object(le.a)(ne,f.e.pending,(function(e,t){e.isLoading=!0})),Object(le.a)(ne,f.e.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload,e.isLoggedIn=!0,e.isLoading=!1})),Object(le.a)(ne,f.e.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload})),Object(le.a)(ne,f.b.pending,(function(e,t){e.isLoading=!0})),Object(le.a)(ne,f.b.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(le.a)(ne,f.b.rejected,(function(e,t){e.isLoading=!1})),Object(le.a)(ne,f.c.pending,(function(e,t){e.isLoading=!0})),Object(le.a)(ne,f.c.fulfilled,(function(e,t){e.user.name=null,e.user.email=null,e.token=null,e.isLoggedIn=!1,e.isLoading=!1})),Object(le.a)(ne,f.d.pending,(function(e,t){e.isFetchingCurrentUser=!0})),Object(le.a)(ne,f.d.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(le.a)(ne,f.d.rejected,(function(e,t){e.isFetchingCurrentUser=!1,e.isLoggedIn=!1,e.error=t.payload})),ne)}).reducer,be=Object(ce.a)(Object(ae.d)({serializableCheck:{ignoredActions:[se.a,se.f,se.b,se.c,se.d,se.e]}})),je={key:"token",storage:ie.a,whitelist:["token"]},pe=Object(se.g)(je,de),fe=Object(ae.a)({reducer:{auth:pe,contacts:ue.b},devtools:!0,middleware:be}),he={store:fe,persistor:Object(se.h)(fe)},ge=n(118);l.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(j.a,{store:he.store,children:Object(O.jsx)(ge.a,{loading:null,persistor:he.persistor,children:Object(O.jsx)(M.a,{children:Object(O.jsx)(re,{})})})})}),document.getElementById("root"))},22:function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f}));var r=n(15),c=n.n(r),a=n(36),o=n(32),i=n.n(o),s=n(18),u=n(25);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var l=function(e){i.a.defaults.headers.common.Authorization="Bearer ".concat(e)},d=function(){i.a.defaults.headers.common.Authorization=""},b=Object(s.b)("user/signup",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/signup",t);case 4:return a=e.sent,o=a.data,l(o.token),u.a.SignupSuccess(o.user.name),e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(1),console.log("error",e.t0),u.a.SignupError(),e.abrupt("return",r(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),j=Object(s.b)("user/logIn",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/login",t);case 4:return a=e.sent,o=a.data,l(o.token),u.a.LoginSuccess(o.user.name),e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(1),u.a.LoginError(),e.abrupt("return",r(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),p=Object(s.b)("user/logOut",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/logout");case 4:d(),u.a.LogoutSuccess(),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),u.a.LogoutError(),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(s.b)("user/refresh",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o,s,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,a=n.rejectWithValue,o=r(),null!==(s=o.auth.token)){e.next=5;break}return e.abrupt("return",a({status:null,statusText:"Token not found"}));case 5:return l(s),e.prev=6,e.next=9,i.a.get("/users/current");case 9:return u=e.sent,d=u.data,e.abrupt("return",d);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",a(e.t0));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}()),h={signUp:b,logIn:j,logOut:p,refresh:f};t.a=h},25:function(e,t,n){"use strict";n(156);var r=n(49),c={position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},a=function(e){return r.b.success(e,c)},o=function(e){return r.b.error(e,c)},i={success:a,error:o,SignupSuccess:function(e){return a("Success profile created. Welcome, ".concat(e))},SignupError:function(){return o("Something went wrong, please try again")},LoginSuccess:function(e){return a("Welcome back, ".concat(e))},LoginError:function(){return o("Wrong login or password")},LogoutSuccess:function(e){return Object(r.b)("Goodbye, will happy to see you later")},LogoutError:function(){return o("Something went wrong, refresh the site or try again")},RefreshError:function(){return o("Something went wrong, please try again later")},FetchSuccess:function(){return a("Your contacts successfully upload")},FetchError:function(){return o("Failed to get your contact list. Please try again later")},AddContactSuccess:function(){return a("Contact added successfully")},AddContactError:function(){return o("There was an error adding a contact. Please try agin later")},DeleteContactSuccess:function(){return a("Contact successfully deleted")},DeleteContactError:function(){return o("Failed to add contact. Please try again later")},ChangeContactSuccess:function(){return a("Contact changed successfully")},ChangeContactError:function(){return o("Failed to change contact. Please try again later")}};t.a=i},31:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchContacts",(function(){return l})),n.d(t,"addContact",(function(){return d})),n.d(t,"deleteContact",(function(){return b})),n.d(t,"changeContact",(function(){return j}));var r=n(15),c=n.n(r),a=n(36),o=n(32),i=n.n(o),s=n(18),u=n(25),l=Object(s.b)("contacts/fetchContacts",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.get("/contacts");case 4:return a=e.sent,o=a.data,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(1),u.a.FetchError(),e.abrupt("return",r(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(s.b)("contacts/addContact",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/contacts",t);case 4:return a=e.sent,o=a.data,u.a.AddContactSuccess(),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),u.a.AddContactError(),e.abrupt("return",r(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(s.b)("contacts/deleteContact",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.delete("/contacts/".concat(t));case 4:return u.a.DeleteContactSuccess(),e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),u.a.DeleteContactError(),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),j=Object(s.b)("contact/change",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o,s,l,d,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.name,o=t.number,s=n.rejectWithValue,e.prev=2,l={name:a,number:o},e.next=6,i.a.patch("/contacts/".concat(r),l);case 6:return d=e.sent,b=d.data,u.a.ChangeContactSuccess(),e.abrupt("return",b);case 12:return e.prev=12,e.t0=e.catch(2),u.a.ChangeContactError(),e.abrupt("return",s(e.t0));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}())}},[[164,6,7]]]);
//# sourceMappingURL=main.db8ce7af.chunk.js.map